using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class effectDragonAttack  : effectBasic{

	float hpUpWhenattack = 18f;
	float upGate  = 0.5f;

	void Start ()
	{
		Init ();
	}

	public override bool isBE ()
	{
		return true;
	}

	public override void Init ()
	{
		theEffectName = "降龙十八掌";
		//注意的是，最大生命值每回合都会更新的，这个最大生命值的削弱仅仅限制于本回合(如果削减最大斗气值就太变态了)
		theEffectInformation ="攻击的起手阶段恢复"+hpUpWhenattack+"生命\n生命百分比低于"+ upGate*100 +"%,效果翻倍\n（连招攻击此效果只触发一次）\n溢出的治疗效果将转化为护盾但护盾上限降低为8%";
		makeStart ();
		thePlayer.ActerShieldMaxPercent = 0.08f;
	}

	public override void onAttackAction ()
	{
		float overflow = this.thePlayer.ActerHp +hpUpWhenattack - thePlayer.ActerHpMax;
		if (overflow >= 0)
			thePlayer.ActerShieldHp += overflow;
		
		this.thePlayer.ActerHp += hpUpWhenattack;
		if(thePlayer.ActerHp/thePlayer.ActerHpMax < upGate)
			this.thePlayer.ActerHp += hpUpWhenattack;
	}
}
